const scrollStoriesData = [
  {
    id: 672,
    fullName: "Amelia Harrison",
    verified: true,
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    watched: true,
    medias: [
      {
        type: "image",
        caption: "A moment of peace in the chaos of life || ðŸŒ¿",
        media: "https://images.unsplash.com/photo-1544894079-e81a9eb1da8b?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGZyZWUlMjBpbWFnZXN8ZW58MHx8MHx8fDA%3D",
      },
      {
        type: "video",
        caption: "Chasing dreams, one step at a time || âœ¨. Typically represents a community, friends list, or user management options. Closed Captions (CC) Icon â€“ Used for enabling or disabling subtitles or captions in a video.",
        media: "./assets/videos/1.mp4",
      },

      {
        type: "image",
        caption: "Life is too short to wait for the perfect moment, create it!. Closed Captions (CC) Icon â€“ Used for enabling or disabling subtitles or captions in a video.",
        media: "./images/stories/story_image_7.svg",
      },

      {
        type: "image",
        caption: "Sometimes, the best things in life come when we least expect them.",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
    ],
  },

  {
    id: 372,
    fullName: "Lucas Mitchell",
    verified: true,
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    watched: false,
    medias: [
      {
        type: "image",
        caption: "Let the good vibes roll â€“ it's all about enjoying the ride.",
        media: "./images/stories/story_image_8.svg",
      },

      {
        type: "image",
        caption: "Finding beauty in the little things that make each day unique.",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
    ],
  },

  {
    id: 182,
    fullName: "Emma Robinson",
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    watched: false,
    medias: [
      {
        type: "image",
        caption: "Smiling through the ups and downs, because every day is a new beginning.",

        media: "./images/stories/story_image_9.svg",
      },
    ],
  },

  {
    id: 132,
    watched: true,
    fullName: "Ethan Parker",
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    medias: [
      {
        type: "image",
        caption: "Escaping reality with a cup of coffee and a good book. ðŸ“šâ˜•",
        media: "./images/stories/story_image_6.svg",
      },
      {
        type: "video",
        caption: "When life gives you lemons, make some magic.",
        media: "../assets/videos/2.mp4",
      },
    ],
  },

  {
    id: 400,
    watched: false,
    fullName: "James Morris",
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    medias: [
      {
        type: "image",
        caption: "Escaping reality with a cup of coffee and a good book. ðŸ“šâ˜•",
        media: "https://images.unsplash.com/photo-1720884413532-59289875c3e1?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8ZnJlZSUyMGltYWdlc3xlbnwwfHwwfHx8MA%3D%3D",
      },

      {
        type: "image",
        caption: "Hereâ€™s to the nights that turn into mornings and the friends that turn into family. || ðŸ‘©â€ðŸ‘©â€ðŸ‘¦â€ðŸ‘¦",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
    ],
  },

  {
    id: 430,
    watched: true,
    fullName: "Alexander Brooks",
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    medias: [
      {
        type: "image",
        caption: "Adventure awaits beyond the horizon. Ready to take on the world! ðŸŒ",
        media: "./images/stories/story_image_10.png",
      },

      {
        type: "image",
        caption: "Building my dreams with determination, one brick at a time. ðŸ—ï¸",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
    ],
  },

  {
    id: 420,
    watched: false,
    fullName: "Benjamin Ross",
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    medias: [
      {
        type: "image",
        caption: "The sun will set, but it will rise again tomorrow. ðŸŒ…",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
      {
        type: "video",
        caption: "Celebrating lifeâ€™s small wins â€“ they all add up in the end.",
        media: "../assets/videos/3.mp4",
      },
    ],
  },

  {
    id: 470,
    watched: true,
    fullName: "Jackson Bailey",
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    medias: [
      {
        type: "image",
        caption: "Taking a moment to appreciate how far I've come. No stopping now!",
        media: "./images/stories/story_image_4.svg",
      },

      {
        type: "image",
        caption: "When you stop looking for happiness, thatâ€™s when it finds you.",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
    ],
  },

  {
    id: 570,
    watched: true,
    fullName: "Charlotte Bryant",
    verified: true,
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    medias: [
      {
        type: "image",
        caption: "Not every day is perfect, but thereâ€™s something good in every day.",
        media: "./images/stories/story_image_3.svg",
      },

      {
        type: "image",
        caption: "In a world where you can be anything, be kind. ðŸŒŸ",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
    ],
  },

  {
    id: 836,
    watched: true,
    fullName: "William Turner",
    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    medias: [
      {
        type: "image",
        caption: "Sometimes the hardest battles are the ones we fight within ourselves. Stay strong.",
        media: "./images/stories/story_image_2.svg",
      },

      {
        type: "image",
        caption: "A beautiful day begins with a positive mindset and a little bit of sunshine. ðŸ’‹",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
    ],
  },

  {
    id: 68,
    watched: true,
    fullName: "Noah Cooper",
    verified: true,

    userPhoto: "https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZmlsZXxlbnwwfHwwfHx8MA%3D%3D",
    medias: [
      {
        type: "image",
        caption: "Life isnâ€™t about waiting for the storm to pass; itâ€™s about learning to dance in the rain. || ðŸŒ§",
        media: "./images/stories/story_image_1.svg",
      },

      {
        type: "image",
        caption: "Be a voice, not an echo. ðŸ—£ï¸",
        media: "https://images.unsplash.com/photo-1533899114961-3aa0579cd5b8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzh8fGJhY2tncm91bmR8ZW58MHx8MHx8fDA%3D",
      },
    ],
  },
];

scrollStoriesData[10].pinIcon = "./images/stories/Story_pin_Icon1.svg";
scrollStoriesData[8].pinIcon = "./images/stories/Story_pin_Icon2.svg";
scrollStoriesData[9].pinIcon = "./images/stories/Story_pin_Icon2.svg";
scrollStoriesData[5].pinIcon = "./images/stories/Story_pin_Icon2.svg";
scrollStoriesData[6].pinIcon = "./images/stories/Story_pin_Icon2.svg";
scrollStoriesData[7].pinIcon = "./images/stories/Story_pin_Icon1.svg";
scrollStoriesData[1].pinIcon = "./images/stories/Story_pin_Icon1.svg";
scrollStoriesData[2].pinIcon = "./images/stories/Story_pin_Icon2.svg";
scrollStoriesData[3].pinIcon = "./images/stories/Story_pin_Icon1.svg";
scrollStoriesData[4].pinIcon = "./images/stories/Story_pin_Icon1.svg";

const storyListContainer = document.getElementById("storyListContainer");
const storyModalContainer = document.getElementById("storyModalContainer");
const closeStoryDisplay = document.getElementById("closeStoryDisplay");
storyModalContainer.addEventListener("click", function (e) {
  if (e.target.id === "storyModalContainer") {
    this.classList.add(HIDDEN);
  }
});

closeStoryDisplay.addEventListener("click", function (e) {
  storyModalContainer.classList.add(HIDDEN);
  if (e.target.id === "storyModalContainer") {
  }
});

async function renderStories(stories) {
  if (!storyListContainer) return;

  storyListContainer.innerHTML = "";

  // insert each story into the container
  for (const story of stories) {
    const { watched, medias, userPhoto, fullName, pinIcon } = story;

    const firstMedia = medias?.[0];
    // console.log("First Media:", firstMedia);

    // const mediaLength = Array.from({ length: medias?.length || 0 }, (_, i) => i + 1);

    const markup = `
      <li class="story-list-item ${watched ? "viewed_update" : "new_update"}" id="storyItem">
        <div class="story-media">
          ${firstMedia?.type === "video" ? `<img src="${firstMedia.media}"></img>` : `<img src="${firstMedia.media}" />`}
          <div class="story-overlay"></div>
          
          <div class="user_story">
            <img src="${userPhoto}" alt="${fullName}" />
            </div>
            <span class="user-name">${fullName}</span>
          <div class="story-media-count-wrapper ${medias?.length > 0 ? "" : HIDDEN}">
          
          </div>
        </div>
        ${pinIcon ? `<div class="pin-icon"><img src="${pinIcon}" alt="pin-icon" /> </div>` : ""}
      </li>
    `;

    storyListContainer.insertAdjacentHTML("afterbegin", markup);
  }

  // insert the add new story later
  storyListContainer.insertAdjacentHTML(
    "afterbegin",
    `
        <li class="story-list-item add_new_story" id="addNewStory">
           <span>Your Story</span>
           <svg data-icon><use href="../icons/sprite.svg#add" /></svg>
        </li>
   `
  );

  storyListContainer.insertAdjacentHTML(
    "beforeend",
    `
    <div class="no-story">
      <img src="./images/stories/no-stories.svg" />
      <span>No more Stories to Show</span>
      <span class="find-friends" id="findFriends">Find Friends</span>
    </div>`
  );

  const suggestionModal = document.getElementById("suggestion_modal");
  const findFriends = document.getElementById("findFriends");
  findFriends.addEventListener("click", () => {
    handleShowSuggestionModal();
  });

  // Add Story
  const addNewStory = document.getElementById("addNewStory");
  addNewStory.addEventListener("click", (e) => {
    document.getElementById("story_overlay").classList.remove(HIDDEN);
    document.querySelector(".sidebar_trigger").classList.add(HIDDEN);
  });

  // close Add story
  const closeAddStory = document.getElementById("closeAddStory");
  closeAddStory.addEventListener("click", () => {
    document.getElementById("story_overlay").classList.add(HIDDEN);
    document.querySelector(".sidebar_trigger").classList.remove(HIDDEN);
  });

  // Show Stories
  const storyItems = storyListContainer.querySelectorAll("#storyItem");
  storyItems.forEach((storyItem) => {
    storyItem.addEventListener("click", () => removeClass(storyModalContainer));
  });
}

function renderStoriesSkeleton() {
  const commentLength = Array.from({ length: 20 }, (_, i) => i + 1);

  commentLength.forEach((comment) => {
    const markup = `
      <li class="story-list-item-skeleton"></li>
    `;
    storyListContainer?.insertAdjacentHTML("beforeend", markup);
  });
}

renderStoriesSkeleton();

setTimeout(() => {
  renderStories(scrollStoriesData);
}, 2000);

const storyReactWithEmoji = document.getElementById("storyReactWithEmoji");
const storyEmojiContainer = document.getElementById("storyEmojiContainer");

storyReactWithEmoji.addEventListener("click", showStoryEmojiContainer);

storyEmojiContainer.addEventListener("click", (e) => {
  if (e.target.id === "storyEmojiContainer") {
    hideStoryEmojiContainer();
  }
});

function showStoryEmojiContainer() {
  storyEmojiContainer.classList.remove(HIDDEN);
}

function hideStoryEmojiContainer() {
  storyEmojiContainer.classList.add(HIDDEN);
}
